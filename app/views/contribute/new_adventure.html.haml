%article.bodyText  %h1 New Adventure  = form_for @adventure, :url => new_adventure_path do |f|    .collapse_group{:"data-name" => "Adventure fields"}= render :partial => 'adventure_form', :locals => {:f => f}    .row      #submitBtn= f.submit 'Next - Define Encounter Types', :class => "btn offset2"        :javascript    $.previewXhr = 0;    function advPreview() {                  $.ajax('#{adventure_preview_path}', {       type: 'post',        data: $('#new_adventure_file').serialize(),               beforeSend: function(xhr) {          if ($.previewXhr != 0)            $.previewXhr.abort();                      $.previewXhr = xhr;          },          success: function(data, textStatus) {         $('#preview').html("Your adventure will look like this: " + data);                    // Pad the main form so the preview won't prevent the buttons being pressed.          $('.container').css({paddingBottom: $('#preview').height() + 18 + "px"});        }      })    };        // Create a fixed footer to hold a preview    $('<div class="row"><div id="preview" class="span16"/></div>').appendTo($('.container'));         advPreview();                  // When the user updates part of the form, generate a preview          $('#new_adventure_file').delegate('input,textarea,select', 'blur', advPreview);